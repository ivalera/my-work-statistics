<div class="task-container">
  <div class="header">
    <h2>Доски и задачи</h2>
    <div class="controls">
      <div class="input-group">
        <div class="space-input">
          <input
            type="number"
            [(ngModel)]="spaceId"
            placeholder="Введите ID пространства"
            (keyup.enter)="loadBoards()"
          />
        </div>
        <div class="username-input">
          <input
            type="text"
            [(ngModel)]="username"
            placeholder="Введите имя пользователя"
            (keyup.enter)="loadBoards()"
          />
        </div>
        <button (click)="loadBoards()">Загрузить доски</button>
      </div>
      <button (click)="logout()" class="logout-btn">Выйти</button>
    </div>
    <div class="total-hours" *ngIf="totalHours > 0">
      <span class="label">Всего часов в колонке "Готово":</span>
      <span class="value">{{ totalHours }}h</span>
    </div>
    <div class="controls-row">
      <div class="sort-controls">
        <button class="sort-btn" (click)="toggleSortOrder()">
          {{ isAscending ? 'По возрастанию' : 'По убыванию' }}
          <i class="fas" [ngClass]="isAscending ? 'fa-sort-up' : 'fa-sort-down'"></i>
        </button>
      </div>
      <div class="export-controls">
        <button class="export-btn" (click)="exportToExcel()">
          Экспорт в Excel
          <i class="fas fa-file-excel"></i>
        </button>
      </div>
    </div>
  </div>
  
  <div class="boards-list">
    <div *ngIf="loading" class="loading">Загрузка...</div>
    <div *ngIf="error" class="error">{{ error }}</div>
    
    <div *ngFor="let board of boards" class="board-card">
      <h3>{{ board.title }}</h3>
      
      <div class="columns-container">
        <div *ngFor="let column of getSortedColumns(board.columns)" class="column">
          <div class="column-header">
            <h4 class="column-title">{{ column.title }}</h4>
          </div>
          
          <div class="column-cards">
            <div *ngIf="!getColumnCards(board.id, column.id)?.length" class="no-cards">
              Нет задач
            </div>
            <app-task-card
              *ngFor="let card of getColumnCards(board.id, column.id)"
              [card]="card"
            ></app-task-card>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 